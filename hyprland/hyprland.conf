# ██   ██ ██    ██ ██████  ██████   
# ██   ██  ██  ██  ██   ██ ██   ██  
# ███████   ████   ██████  ██████   
# ██   ██    ██    ██      ██   ██  
# ██   ██    ██    ██      ██   ██  
#                                  
# ██       █████  ███    ██ ██████  
# ██      ██   ██ ████   ██ ██   ██ 
# ██      ███████ ██ ██  ██ ██   ██ 
# ██      ██   ██ ██  ██ ██ ██   ██ 
# ███████ ██   ██ ██   ████ ██████  
# =================================

# ------------
# ENVIRONTMENT
# ------------

env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,qt5ct # change to qt6ct if you have that

# ---------------
# Global Behavior
# ---------------
autogenerated = 0

gestures {
    workspace_swipe = off
}

general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    # col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    # col.active_border = rgba(33ccffee) rgba(bd00a0ee) 45deg
    col.active_border   = rgba(6272a4ee) rgba(ff79c6ee) 45deg
    col.inactive_border = rgba(595959aa)
    layout = dwindle
    allow_tearing = false
}

decoration {
    active_opacity = 0.98
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0
    
    rounding = 10
    drop_shadow = false
    shadow_range = 4
    shadow_render_power = 3
    shadow_ignore_window = true
    col.shadow = rgba(1a1a1aee)
    dim_inactive = false

    blur {
	enabled = true
        size = 15
        passes = 2 # more passes = more resource intensive.
        new_optimizations = true
        xray = true
        ignore_opacity = false
    }
}

animations {
    enabled = true
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

misc {
     force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
     # disable_autoreload = true
     # disable_hyprland_logo = true
     # always_follow_on_dnd = true
     # layers_hog_keyboard_focus = true
     # animate_manual_resizes = false
     # enable_swallow = true
     # swallow_regex = ^(gnome-system-monitor)$
     # focus_on_activate = true
     # vfr = 1
}


# ------------
# Run on start
# ------------
exec-once = mako & # message server
exec-once = nm-applet & # network manager
exec-once = waypaper --restore &
exec-once = waybar -c ~/.config/waybar/hyprland/config.jsonc -s ~/.config/waybar/hyprland/style.css &
# exec-once = emacs --daemon & # but better start from systemctl 

# -------
# Layouts
# -------

dwindle {
    pseudotile = yes # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = yes # you probably want this
    no_gaps_when_only = 1
    # force_split = 0
    # special_scale_factor = 0.8
    # split_width_multiplier = 1.0
    # use_active_for_splits = true
    # pseudotile = yes # master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    # preserve_split = yes
}

master {
    new_is_master = true
    # no_gaps_when_only = false
    # special_scale_factor = 0.8    
}

# --------------
# Device configs
# --------------

monitor=,preferred,auto,auto # See https://wiki.hyprland.org/Configuring/Monitors/

device:epic-mouse-v1 {
    sensitivity = -0.5
}

monitor=eDP-1, 1920x1080, 0x0, 1


# -----------
# Keybindings
# -----------

# For all categories, see https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout = us,ua,pl
    kb_variant =
    kb_model =
    kb_options = ctrl:nocaps,grp:win_space_toggle
    kb_rules =
    repeat_rate = 100
    repeat_delay = 200
    follow_mouse = 1

    touchpad {
        natural_scroll = no
    }

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}

$mainMod = SUPER
$terminal = kitty

# running programs
bind = $mainMod SHIFT, RETURN, exec, $terminal
bind = $mainMod SHIFT, N, exec, nemo
bind = $mainMod SHIFT, S, exec, grimshot --cursor --notify savecopy area
bind = $mainMod, N, exec, nemo
bind = $mainMod CTRL, K, exec, ~/.bin/rofi_kill_process
bind = $mainMod CTRL, M, exec, ~/.bin/rofi_machine_control
bind = $mainMod CTRL, S, exec, ~/.bin/rofi_sound_control
bind = $mainMod CTRL, F, exec, rofi -show file-browser-extended -file-browser-show-hidden
bind = $mainMod, P, exec, rofi -show-icons -show combi -modi run,drun,combi -combi-modi run
# bind = $mainMod, A, exec, rofi -show-icons -show combi -modi run,drun,combi -combi-modi drun
bind = $mainMod, A, exec, ~/.bin/grid_select_program.sh
bind = $mainMod, I, exec, killall -SIGUSR2 waybar
bind = $mainMod, O, exec, waybar -c ~/.config/waybar/hyprland/config.jsonc -s ~/.config/waybar/hyprland/style.css &

bind = $mainMod SHIFT, C, killactive, 
bind = $mainMod, M, exit, 
bind = $mainMod, T, togglefloating, 
bind = $mainMod, code:61, togglesplit, #  code:61 == /
# Screen brightness
bind = , XF86MonBrightnessUp, exec, brightnessctl s +5%
bind = , XF86MonBrightnessDown, exec, brightnessctl s 5%-
bind = $mainMod SHIFT, code:60, exec, ddcutil setvcp 10 - 25
bind = $mainMod SHIFT, code:61, exec, ddcutil setvcp 10 + 25

# Media control
bind = ,XF86AudioRaiseVolume,exec, pactl -- set-sink-volume 0 +10%
bind = ,XF86AudioLowerVolume,exec, pactl -- set-sink-volume 0 -10%
bind = ,XF86AudioMute,exec, pactl set-sink-mute 0 toggle

# bind = ,XF86AudioPlay,exec, playerctl play-pause
# bind = ,XF86AudioNext,exec, playerctl next
# bind = ,XF86AudioPrev,exec, playerctl previous
bind = ,XF86AudioPlay,exec, ~/.bin/spotify_control playpause
bind = ,XF86AudioNext,exec, ~/.bin/spotify_control next
bind = ,XF86AudioPrev,exec, ~/.bin/spotify_control previous
bind = $mainMod, XF86AudioNext, exec, deadbeef --next
bind = $mainMod, XF86AudioPrev, exec, deadbeef --prev
bind = $mainMod, XF86AudioStop, exec, deadbeef --toggle-pause
bind = $mainMod, XF86AudioPlay, exec, deadbeef --toggle-pause

# Control Gaps
# bind = $mainMod SHIFT, G,exec,hyprctl --batch "keyword general:gaps_out 5;keyword general:gaps_in 3"
# bind = $mainMod , G,exec,hyprctl --batch "keyword general:gaps_out 0;keyword general:gaps_in 0"

# Window handling in Xmonad Style 
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

bind = $mainMod CTRL,H ,movewindow, l
bind = $mainMod CTRL,L ,movewindow, r
bind = $mainMod CTRL,K ,movewindow, u
bind = $mainMod CTRL,J ,movewindow, d

bind = $mainMod SHIFT,left ,movewindow, l
bind = $mainMod SHIFT,right ,movewindow, r
bind = $mainMod SHIFT,up ,movewindow, u
bind = $mainMod SHIFT,down ,movewindow, d

bind = $mainMod SHIFT, H, resizeactive, -30 0
bind = $mainMod SHIFT, L, resizeactive, 30 0
bind = $mainMod SHIFT, K, resizeactive, 0 -30
bind = $mainMod SHIFT, J, resizeactive, 0 30

bind = $mainMod, F, fullscreen

# Workspace / Monitor handling in Xmonad style
bind = $mainMod, 1, focusworkspaceoncurrentmonitor, 1
bind = $mainMod, 2, focusworkspaceoncurrentmonitor, 2
bind = $mainMod, 3, focusworkspaceoncurrentmonitor, 3
bind = $mainMod, 4, focusworkspaceoncurrentmonitor, 4
bind = $mainMod, 5, focusworkspaceoncurrentmonitor, 5
bind = $mainMod, 6, focusworkspaceoncurrentmonitor, 6
bind = $mainMod, 7, focusworkspaceoncurrentmonitor, 7
bind = $mainMod, 8, focusworkspaceoncurrentmonitor, 8
bind = $mainMod, 9, focusworkspaceoncurrentmonitor, 9
bind = $mainMod, 0, focusworkspaceoncurrentmonitor, 10

# jump between monitors
bind = $mainMod, W, focusmonitor, 0
bind = $mainMod, E, focusmonitor, 1
bind = $mainMod SHIFT, W, movewindow, mon:0
bind = $mainMod SHIFT, E, movewindow, mon:1

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, movetoworkspacesilent, 10

# Example special workspace (scratchpad)
bind = $mainMod, Z, togglespecialworkspace, magic
bind = $mainMod SHIFT, Z, movetoworkspace, special:magic

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# ------------------------
# Window / Workspace rules
# ------------------------

# Example windowrule v1
# windowrule = float, ^(kitty)$

# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$

windowrulev2 = nomaximizerequest, class:.* # You'll probably like this.
windowrulev2 = float,class:^()$,title:^(Picture in picture)$
windowrulev2 = float,class:^(brave)$,title:^(Save File)$
windowrulev2 = float,class:^(brave)$,title:^(Open File)$
windowrulev2 = float,class:^(LibreWolf)$,title:^(Picture-in-Picture)$
windowrulev2 = float,class:^(blueman-manager)$
windowrulev2 = float,class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float,class:^(xdg-desktop-portal-kde)$
windowrulev2 = float,class:^(xdg-desktop-portal-hyprland)$
windowrulev2 = float,class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = float,class:^(CachyOSHello)$
windowrulev2 = float,class:^(zenity)$
windowrulev2 = float,class:^()$,title:^(Steam - Self Updater)$
# Increase the opacity
windowrule=opacity 0.92,Thunar
windowrule=opacity 0.92,Nautilus
windowrule=opacity 0.96,discord
windowrule=opacity 0.96,armcord
windowrule=opacity 0.96,webcord
#`hyprctl clients` get class、title...
windowrule=float,Xwinmosaic
windowrule=noborder,Xwinmosaic
windowrule=noshadow,Xwinmosaic
windowrule=noblur,Xwinmosaic
windowrule=noanim,Xwinmosaic
windowrule=nodim,Xwinmosaic
windowrule=forcergbx,Xwinmosaic
windowrule=opacity 0.8,Xwinmosaic
# windowrule=float,org.qbittorrent.qBittorrent
windowrule=float,Rofi
windowrule=float,pavucontrol
windowrule=float,title:^(Picture-in-Picture)$
windowrule=size 960 540,title:^(Picture-in-Picture)$
windowrule=move 25%-,title:^(Picture-in-Picture)$
windowrule=float,io.github.celluloid_player.Celluloid
windowrule=move 25%-,io.github.celluloid_player.Celluloid
windowrule=float,mpv
windowrule=move 25%-,mpv
windowrule=size 1420 850,mpv
windowrule=float,vlc
windowrule=move 25%-,vlc
windowrule=size 1420 850,vlc
windowrule=float,imv
windowrule=move 25%-,imv
windowrule=size 960 540,imv
windowrule=float,file-roller
windowrule=move 25%-,file-roller
windowrule=size 960 540,file-roller
windowrule=float,danmufloat
windowrule=move 25%-,danmufloat
windowrule=pin,danmufloat
windowrule=rounding 5,danmufloat
windowrule=size 960 540,danmufloat
windowrule=float,termfloat
windowrule=move 25%-,termfloat
windowrule=size 960 540,termfloat
windowrule=rounding 5,termfloat
windowrule=float,nemo
windowrule=move 25%-,nemo
windowrule=size 1200 900,nemo
windowrule=float,eog
windowrule=move 25%-,eog
windowrule=opacity 0.95,title:Telegram
windowrule=opacity 0.95,title:QQ
windowrule=opacity 0.95,title:NetEase Cloud Music Gtk4
windowrule=animation slide right,kitty
windowrule=animation slide right,alacritty
windowrule=float,ncmpcpp
windowrule=move 25%-,ncmpcpp
windowrule=size 960 540,ncmpcpp
windowrule=noblur,^(firefox)$
windowrule=noblur,^(waybar)$
